<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description" content="Author: HiBootstrap, Category: Tourism, Multipurpose, HTML, SASS, Bootstrap"/>

    <title>TDO DXB | Welcome to TDO DXB</title>

    <link rel="stylesheet" href="/assets/css/bootstrap.min.css"/>

    <link rel="stylesheet" href="/assets/css/fontawesome.min.css"/>

    <link rel="stylesheet" href="/assets/css/boxicons.min.css">

    <link rel="stylesheet" href="/assets/css/animate.min.css"/>

    <link rel="stylesheet" href="/assets/css/bootstrap-datepicker.min.css">

    <link rel="stylesheet" href="/assets/css/nice-select.css">

    <link rel="stylesheet" href="/assets/css/magnific-popup.min.css"/>

    <link rel="stylesheet" href="/assets/css/owl.carousel.min.css"/>

    <link rel="stylesheet" href="/assets/css/meanmenu.min.css"/>

    <link rel="stylesheet" href="/assets/css/style.css"/>
    <link rel="stylesheet" href="/assets/css/style1.css"/>
    <link rel="stylesheet" href="/assets/css/responsive.css"/>

    <link rel="stylesheet" href="/assets/css/theme-dark.css"/>

    <link rel="icon" href="/assets/img/img_1.png" type="image/png"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">


    <link rel="stylesheet" href="/assets/css/registerAgent.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <style>
        .form-border {
            border: 1px solid #e0e0e0; /* Slightly lighter grey border */
            border-radius: 10px; /* More rounded corners */
            padding: 25px; /* Slightly more space inside the border */
            background-color: #ffffff; /* White background for a clean look */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Soft shadow for depth */
            transition: all 0.3s ease; /* Smooth transition for interactive effects */
        }

        .form-border:hover {
            border-color: #b0b0b0; /* Darker border on hover */
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15); /* Enhanced shadow on hover */
        }

        .ptb-100 {
            padding-top: 100px;
            padding-bottom: 100px;
        }

        .error {
            color: #c02323;
            font-size: 0.875em;
        }

        .login-link {
            font-weight: bold; /* Makes the text bold */
            color: #c02323; /* Sets a striking color (e.g., red) */
            /*text-decoration: underline;  !* Adds an underline *!*/
            font-size: 25px; /* Increases the font size for emphasis */
            transition: color 0.3s ease, text-shadow 0.3s ease;
        }

        .login-link:hover {
            color: #ee4242; /* Changes color on hover */
            text-shadow: 1px 1px 5px rgba(0, 0, 0, 0.2); /* Adds a subtle shadow on hover */
        }

        .input-group-text.show-pass {
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .input-group-text.show-pass:hover {
            background-color: #f8f9fa;
        }

        .input-group-text i {
            font-size: 1rem;
            color: #c02323;
        }

        ..service-card {
            margin: 20px;
        }

        .service-card:hover {
            box-shadow: 0 0 20px rgba(236, 62, 62);
        }


    </style>
</head>

<body>
<div id="preloader">
    <div class="loader">
        <div class="loader--dot"></div>
        <div class="loader--dot"></div>
        <div class="loader--dot"></div>
        <div class="loader--dot"></div>
        <div class="loader--dot"></div>
        <div class="loader--dot"></div>
        <div class="loader--text"></div>
    </div>
</div>
<!--Header File-->
<%- include('../partials/header.ejs') %>
<!--<div style="background-image: url(/assets/images/bg1.jpg);background-repeat: no-repeat;background-size: cover">-->
<div style="background-image: url('/assets/images/bg1.jpg');background-repeat: no-repeat;background-size: cover">
    <div class="authentication-section">
        <div class="container">

            <div class="row" style="padding-top: 40px;padding-bottom: 50px">
                <div class="col-sm-7 ">
                    <h1 class="text-light text-center text-sm-start"
                        style="padding-left: 20px; padding-top: 40px; padding-bottom: 20px;">
                        <b>WELCOME TO TRAVEL<br> DEALS ONLINE DXB</b>
                    </h1>
                </div>

                <div class="col-lg-5 col-12 ">
                    <form id="authForm" class="form-border">
                        <div class="content">
                            <h3 class="text-center login-link">Login Your Account</h3>
                        </div>
                        <div class="mt-4">
                            <div class="mb-3">
                                <label class="text-label form-label" for="validationCustomUsername"
                                       style="color: #c02323">Enter
                                    Email</label>
                                <div class="input-group">
                                    <span class="input-group-text"> <i class="fa-solid fa-envelope"
                                                                       style="color: #c02323"></i> </span>
                                    <input type="email" class="form-control border-left-end" id="email" name="email"
                                           placeholder=" Enter Your Registered Email" required>
                                    <div class="invalid-feedback">
                                        Enter Your Registered Email.
                                    </div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label class="form-label text-danger" for="password" style="color: #c02323">Enter
                                    Password</label>
                                <div class="input-group">
                                    <span class="input-group-text bg-light border-end-0"><i class="fa fa-lock"
                                                                                            style="color: #c02323"></i></span>
                                    <input type="password" class="form-control border-start-0 rounded-end" id="password"
                                           name="password" placeholder="Enter Your Password" required>

                                    <div class="invalid-feedback">
                                        Enter Your Password.
                                    </div>
                                </div>
                            </div>

                            <div class="mb-3">
                                <div class="mb-3">
                                    <label for="landingPage" class="form-label text-danger" style="color: #c02323">Select
                                        Landing Page</label>
                                    <div class="input-group">
                               <span class="input-group-text bg-light border-end-0">
                                   <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                        class="bi bi-file-earmark-break-fill" style="color: #c02323"
                                        viewBox="0 0 16 16">
  <path d="M4 0h5.293A1 1 0 0 1 10 .293L13.707 4a1 1 0 0 1 .293.707V9H2V2a2 2 0 0 1 2-2m5.5 1.5v2a1 1 0 0 0 1 1h2zM2 12h12v2a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2zM.5 10a.5.5 0 0 0 0 1h15a.5.5 0 0 0 0-1z"/>
</svg>
                               </span>
                                        <select name="landingPage" id="landingPage" required
                                                class="form-control default-select wide border-start-0 rounded-end">
                                            <option value="">Select Option</option>
                                            <option value="Dashboard">Dashboard</option>
                                            <option value="Flights">Flights</option>
                                            <option value="Hotel">Hotel</option>
                                            <option value="Insurance">Insurance</option>
                                        </select>
                                    </div>
                                    <div id="landingPageError"></div>

                                </div>
                            </div>

                            <div style="text-align: right;" class="mt-2">
                                <a href="/forgotPasswordPage" style="color: #007bff;">Forgot Password?</a>
                            </div>


                            <button type="button" class="btn mt-4 w-100" id="button"
                                    style="background-color: #c02323;color: white" onclick="login()">
                                Login
                            </button>
                            <div class="f-12 text-center mt-3">No account yet? <a href="/agentRegister" style="color: #007bff;">Signup here.</a></div>

                        </div>
                    </form>
                </div>

            </div>
        </div>
    </div>
</div>


<div class="ptb-100 bg-light">
    <div class="row">
        <!-- Heading -->
        <div class="col-12">
            <h5 class="text-center" style="color: #c02323;">OUR SERVICES</h5>
            <h1 class="text-dark text-center pb-5"><b>Services We Provide</b></h1>
        </div>
        <!-- Images -->
        <div class="col-lg-2 col-md-4 col-sm-6 col-6 text-center service-card ps-3 offset-lg-2 mb-4">
            <img src="/assets/images/flights.png" alt="Flights" class="img-fluid mb-3 ms-2"/>
            <h4 class="font-weight-bold">Flights</h4>
        </div>
        <div class="col-lg-2 col-md-4 col-sm-6 col-6 text-center service-card mb-4">
            <img src="/assets/images/hotels.png" alt="Hotels" class="img-fluid mb-3"/>
            <h4 class="font-weight-bold">Hotels</h4>
        </div>
        <div class="col-lg-2 col-md-4 col-sm-6 col-6 text-center service-card mb-4">
            <img src="/assets/images/travel-insurance.png" alt="Travel Insurance" class="img-fluid mb-3"/>
            <h4 class="font-weight-bold">Travel Insurance</h4>
        </div>
        <div class="col-lg-2 col-md-4 col-sm-6 col-6 text-center service-card mb-4 pt-4">
            <img src="/assets/images/visa.png" alt="E-Visa" class="img-fluid bg-light rounded-circle " style="width: 160px; height: 160px;">
            <h4 class="font-weight-bold pt-4">E-Visa</h4>
        </div>
    </div>

</div>


<%- include('../partials/footer.ejs') %>

</body>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const togglePassword = document.getElementById('togglePassword');
        const passwordField = document.getElementById('password');
        const eyeSlashIcon = togglePassword.querySelector('.fa-eye-slash');
        const eyeIcon = togglePassword.querySelector('.fa-eye');

        togglePassword.addEventListener('click', function () {
            const type = passwordField.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordField.setAttribute('type', type);
            eyeSlashIcon.classList.toggle('d-none');
            eyeIcon.classList.toggle('d-none');
        });
    });

    async function login() {
        try {

            if ($("#authForm").valid()) {
                const landingPage = document.getElementById('landingPage').value;
                if (landingPage === "") {
                    return $('#landingPageError').text('Please select a Landing Page.')
                        .css({
                            'color': '#c02323',
                            'font-family': 'Arial',
                            'font-size': '0.875em'
                        });
                } else {
                    $('#landingPageError').text('');
                }
                const email = document.getElementById("email").value
                const password = document.getElementById("password").value
                console.log(email, password)
                let formData = new FormData()
                formData.append("Email", email)
                formData.append("Password", password)
                console.log(formData)
                // let url = "/agent-login";
                // let ip = 'http://192.168.29.210:4000'
                // let url = ip + "/agent-login";
                let url = "/agent-login";
                console.log(url)

                let response = await fetch(url, {
                    method: "POST",
                    body: formData  // Convert to JSON string
                });
                let result = await response.json();
                console.log(result.data)
                if (result.error) {
                    Swal.fire({
                        title: "OOPS!",
                        text: result.message,
                        icon: "error"
                    });
                }
                else if (result.warning) {
                    Swal.fire({
                        title: "OOPS!",
                        text: result.message,
                        icon: "warning"
                    });
                }
                else {
                    Swal.fire({
                        title: "Success",
                        text: result.message,
                        icon: "success"
                    });
                    // Save image path to localStorage
                    // localStorage.setItem("agent_profile_logo", "/assets2/images/demo_avatar.png");
                    if(result.data.Flag === 1){
                      return setTimeout("window.location.href='/subUser_changePassword';", 3000)
                    }
                    if (landingPage === "Dashboard") {
                        setTimeout("window.location.href='/agent-dashboard';", 3000)
                    }
                    if (landingPage === "Flights") {
                        setTimeout("window.location.href='/flights';", 3000)
                    }
                    if (landingPage === "Hotel") {
                        setTimeout("window.location.href='/hotels/search-page';", 3000)
                    }
                    if (landingPage === "Insurance") {
                        setTimeout("window.location.href='/insurance';", 3000)
                    }
                    document.getElementById("authForm").reset()
                }
            }
        } catch (e) {
            Swal.fire({
                title: "OOPS!",
                text: e.message,
                icon: "question"
            });
        }
    }
</script>
</html>