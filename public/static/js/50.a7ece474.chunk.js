"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[50],{50050:(e,s,t)=>{t.r(s),t.d(s,{default:()=>j});var a=t(72791),n=t(73787),r=t(78983),i=t(16157),l=t(47103),c=t(61134),d=t(81364),o=t(55294),h=t(62591),m=t(40835),x=t(80184);n.Z.CanvasJSChart;const j=()=>{let[e,s]=(0,a.useState)(!0);(0,a.useEffect)((()=>{b(),y()}),[]);const[t,n]=(0,a.useState)([]),[j,p]=(0,a.useState)([]);function u(e){var s=(e=e.toString()).substring(e.length-3),t=e.substring(0,e.length-3);return""!=t&&(s=","+s),t.replace(/\B(?=(\d{2})+(?!\d))/g,",")+s}function b(){let e=(0,d.Do)(d.vA);o.Z.get(d.ys+"admin/view-symbo-account",{headers:{Authorization:"Bearer ".concat(e),Content_Type:"application-json"}}).then((e=>{n(e.data.recordset)})).catch((e=>{console.log(e)}))}function y(){let e=(0,d.Do)(d.vA);o.Z.get(d.ys+"admin/symbo-balance",{headers:{Authorization:"Bearer ".concat(e),Content_Type:"application-json"}}).then((e=>{p(e.data.recordset[0].final_amount),s(!1)})).catch((e=>{console.log(e),s(!1)}))}let{register:f,handleSubmit:g,reset:v,formState:{errors:N}}=(0,c.cI)();const[T,C]=(0,a.useState)(!1),_=()=>C(!1);const[k,A]=(0,a.useState)(1),D=Math.ceil(t.length/10),P=[];let Z=k-Math.floor(2.5);Z=Math.max(1,Z);let S=Z+5-1;S=Math.min(D,S),S-Z+1<5&&(Z=Math.max(1,S-5+1));for(let a=Z;a<=S;a++)P.push(a);return(0,x.jsx)(x.Fragment,{children:e?(0,x.jsx)("div",{children:(0,x.jsx)("span",{className:"spinner-border text-primary"})}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(r.xH,{className:"mb-4",children:(0,x.jsx)(r.sl,{children:(0,x.jsx)(r.rb,{children:(0,x.jsxs)("div",{className:"table-responsive px-3 ",children:[(0,x.jsxs)("h2",{style:{textAlign:"center"},children:[" ",(0,x.jsxs)("b",{children:["Total Balance : ","\u20b9 ",(0,x.jsx)(m.ZP,{start:0,end:j})," "]})," "]}),(0,x.jsx)("hr",{}),(0,x.jsxs)("div",{className:"bg-light py-2 mb-3",children:[(0,x.jsx)(i.Z,{variant:"primary",onClick:()=>{C(!0)},children:"Add New Payment"}),(0,x.jsx)("div",{className:"row"})]}),(0,x.jsxs)("div",{className:"row",children:[(0,x.jsx)("br",{}),(0,x.jsx)("div",{style:{height:"335px"},className:"table-responsive",children:(0,x.jsxs)(h.Z,{responsive:!0,hover:!0,children:[(0,x.jsx)("thead",{style:{position:"sticky",top:0},children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{children:"Transaction ID"}),(0,x.jsx)("th",{children:"Created On"}),(0,x.jsx)("th",{children:"Mode Of Payment"}),(0,x.jsx)("th",{children:"Date of Payment"}),(0,x.jsx)("th",{children:"Amount"}),(0,x.jsx)("th",{children:"Type"})]})}),(0,x.jsx)("tbody",{children:t.slice(10*(k-1),10*k).map(((e,s)=>(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:e.id}),(0,x.jsx)("td",{children:e.date.split("T")[0]}),(0,x.jsx)("td",{children:e.modeOfPayment}),(0,x.jsx)("td",{children:e.dateOfPayment.split("T")[0]}),"Deposit"===e.transactionType?(0,x.jsx)("td",{style:{color:"green"},children:u(e.amount)}):(0,x.jsx)("td",{style:{color:"red"},children:u(e.amount)}),"Deposit"===e.transactionType?(0,x.jsx)("td",{children:(0,x.jsxs)("span",{className:"badge bg-success ms-auto",children:[" ",e.transactionType," "]})}):(0,x.jsx)("td",{children:(0,x.jsxs)("span",{className:"badge bg-danger ms-auto",children:[" ",e.transactionType," "]})})]},s)))})]})}),(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)("button",{className:"btn btn-sm me-2",style:{fontSize:"18px",border:"none"},onClick:()=>{A((e=>Math.max(e-1,1)))},disabled:1===k,children:"\xab"}),P.map((e=>(0,x.jsx)("button",{className:"btn btn-sm ".concat(k===e?"btn-success":"btn-light"),onClick:()=>(e=>{A(e)})(e),children:e},e))),(0,x.jsx)("button",{className:"btn btn-sm ms-2",style:{fontSize:"18px",border:"none"},onClick:()=>{A((e=>Math.min(e+1,D)))},disabled:k===D,children:"\xbb"})]})]})]})})})}),(0,x.jsxs)(l.Z,{show:T,onHide:_,centered:!0,children:[(0,x.jsx)(l.Z.Header,{closeButton:!0,children:(0,x.jsx)(l.Z.Title,{children:"Add Payment"})}),(0,x.jsx)(l.Z.Body,{children:(0,x.jsxs)("form",{onSubmit:g((function(e){let s=(0,d.Do)(d.vA);o.Z.post(d.ys+"admin/symbo-account",e,{headers:{Authorization:"Bearer ".concat(s),Content_Type:"application-json"}}).then((e=>{!1===e.data.error?((0,d.Qm)(e.data.message),b(),y(),v(),_()):(0,d.Jc)("Error while Adding")})).catch((e=>{console.log(e)}))})),children:[(0,x.jsxs)("div",{className:"mb-3",children:[(0,x.jsx)("label",{htmlFor:"mop",children:"Mode of Payment"}),(0,x.jsxs)("select",{...f("mop",{required:!0}),className:"form-control",id:"mop",children:[(0,x.jsx)("option",{value:"",children:" Choose Mode of Payment"}),(0,x.jsx)("option",{value:"Credit_Card",children:" Credit Card"}),(0,x.jsx)("option",{value:"Debit_Card",children:"Debit Card"}),(0,x.jsx)("option",{value:"Net_Banking",children:"Net Banking"}),(0,x.jsx)("option",{value:"UPI",children:"UPI"})]}),N.mop&&(0,x.jsx)("p",{className:"text-danger",children:"This is a required field."})]}),(0,x.jsxs)("div",{className:"mb-3",children:[(0,x.jsx)("label",{htmlFor:"amount",children:"Amount"}),(0,x.jsx)("input",{...f("amount",{required:!0}),pattern:"[0-9]{1,5}",placeholder:"Enter Amount",type:"text",id:"amount",className:"form-control"}),N.amount&&(0,x.jsx)("p",{className:"text-danger",children:"This is a required field."})]}),(0,x.jsxs)("div",{className:"mb-3",children:[(0,x.jsx)("label",{htmlFor:"date",children:"Date of Payment"}),(0,x.jsx)("input",{...f("date",{required:!0}),placeholder:"Date of Payment",type:"date",id:"date",className:"form-control"}),N.date&&(0,x.jsx)("p",{className:"text-danger",children:"This is a required field."})]}),(0,x.jsxs)("div",{className:"mb-3",children:[(0,x.jsx)("label",{htmlFor:"type",children:"Transaction Type"}),(0,x.jsxs)("select",{...f("type",{required:!0}),className:"form-control",id:"type",children:[(0,x.jsx)("option",{value:"",children:" Transaction Type"}),(0,x.jsx)("option",{value:"Deposit",children:"Deposit"}),(0,x.jsx)("option",{value:"Withdraw",children:"Withdraw"})]}),N.type&&(0,x.jsx)("p",{className:"text-danger",children:"This is a required field."})]}),(0,x.jsxs)("div",{className:"mb-3",children:[(0,x.jsx)("label",{htmlFor:"Remarks",children:"Remarks"}),(0,x.jsx)("textarea",{...f("Remarks",{required:!0}),placeholder:"Remarks",id:"Remarks",className:"form-control"}),N.Remarks&&(0,x.jsx)("p",{className:"text-danger",children:"This is a required field."})]}),(0,x.jsx)("hr",{}),(0,x.jsxs)("div",{className:"mb d-flex justify-content-between align-items-center",children:[(0,x.jsx)(i.Z,{variant:"secondary",onClick:_,children:"Close"}),(0,x.jsx)(i.Z,{variant:"primary",type:"submit",className:"ml-auto",children:"Add"})]})]})})]})]})})}}}]);
//# sourceMappingURL=50.a7ece474.chunk.js.map