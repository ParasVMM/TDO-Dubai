"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[8551],{91644:(e,t,s)=>{s.r(t),s.d(t,{default:()=>h});s(85654);var n=s(72791),l=s(78983),o=(s(40835),s(81364)),i=(s(50065),s(76977),s(62591)),a=s(16157),c=s(55294),r=(s(54553),s(97477)),d=s(61134),x=(s(50547),s(80184));const h=()=>{const[e,t]=(0,n.useState)({});let{register:s,handleSubmit:h,reset:p,formState:{errors:j}}=(0,d.cI)();const[m,u]=(0,n.useState)([]),[g,S]=(0,n.useState)([]);let[y,b]=(0,n.useState)(!0);const[f,k]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{!function(){let e=(0,o.Do)(o.vA);c.Z.get(o.ys+"admin/hotel-booking-details",{headers:{Authorization:"Bearer ".concat(e),Content_Type:"application-json"}}).then((e=>{console.log(e.data.recordset),u(e.data.recordset),S(e.data.recordset),b(!1)})).catch((e=>{console.log(e),b(!1)}))}()}),[]),(0,x.jsx)(x.Fragment,{children:y?(0,x.jsx)("div",{children:(0,x.jsx)("span",{className:"spinner-border text-primary"})}):(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(l.xH,{className:"mb-4",children:(0,x.jsxs)(l.sl,{children:[(0,x.jsxs)(l.bn,{children:[(0,x.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:(0,x.jsxs)("div",{style:{flex:1},children:[(0,x.jsx)("strong",{children:" Search By : "}),(0,x.jsx)("br",{})]})}),(0,x.jsx)("br",{}),(0,x.jsxs)("form",{onSubmit:h((function(e){console.log(e);const t=g;if(console.log(t),""===e.BookingID&&""===e.BookingStatus&&""===e.PNR)return k(!1),void u(t);var s=e.BookingStatus,n=e.BookingID;console.log(n),e.PNR,e.FromDate,e.ToDate,e.TransactionID;const l=t.filter((e=>e.bookingId.includes(n)&&e.bookingStatus.includes(s)));console.log(l),0===l.length?(k(!0),u(l)):(k(!1),u(l))})),children:[(0,x.jsxs)("div",{className:"row",children:[(0,x.jsxs)("div",{className:"col-sm-4",children:[(0,x.jsx)("span",{children:"Booking ID "}),(0,x.jsx)("input",{className:"form-control",type:"text",placeholder:"Booking RefNo",...s("BookingID")})]}),(0,x.jsxs)("div",{className:"col-sm-4",children:[(0,x.jsx)("span",{children:"Booking Status"}),(0,x.jsxs)("select",{...s("BookingStatus"),className:"form-control",children:[(0,x.jsx)("option",{value:"",children:"All"}),(0,x.jsx)("option",{value:"SUCCESS",children:"Success"}),(0,x.jsx)("option",{value:"HOLD",children:"Hold"}),(0,x.jsx)("option",{value:"cancel request",children:"Cancel Request"}),(0,x.jsx)("option",{value:"Released",children:"Released"})]})]})]}),(0,x.jsxs)("div",{className:"row",style:{marginTop:"5px"},children:[(0,x.jsxs)("div",{className:"col-sm-4",children:[(0,x.jsx)("span",{style:{visibility:"hidden"},children:"Booking Status"}),(0,x.jsx)("br",{}),(0,x.jsx)(a.Z,{variant:"primary",type:"submit",children:"Search"})]}),(0,x.jsxs)("div",{className:"col-sm-2 offset-6",children:[(0,x.jsx)("span",{style:{visibility:"hidden"},children:"Booking Status"}),(0,x.jsx)("br",{}),(0,x.jsx)(l.u5,{style:{backgroundColor:"red",color:"white",border:"black",fontSize:"0.875rem",padding:"0.25rem 0.5rem"},type:"button",color:"success",onClick:()=>(0,o.pq)("flightStats"),children:"Export To Excel"})]})]}),(0,x.jsx)("div",{className:"row",style:{marginTop:"5px"}})]})]}),(0,x.jsx)("div",{style:{height:"335px"},id:"flightStats",className:"table-responsive",children:(0,x.jsxs)(i.Z,{responsive:!0,hover:!0,children:[(0,x.jsx)("thead",{style:{position:"sticky",top:0},children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{style:{fontSize:"14px"},children:"Booking\xa0ID"}),(0,x.jsx)("th",{style:{fontSize:"14px"},className:"text-center",children:"Agent\xa0Email"}),(0,x.jsx)("th",{style:{fontSize:"14px"},className:"text-center",children:"Payment\xa0Status"}),(0,x.jsx)("th",{style:{fontSize:"14px"},children:"Booking\xa0Status"}),(0,x.jsx)("th",{style:{fontSize:"14px"},className:"text-center",children:"Check-in"}),(0,x.jsx)("th",{style:{fontSize:"14px"},children:"Check-out"}),(0,x.jsx)("th",{style:{fontSize:"14px"},children:"Total\xa0Amount"}),(0,x.jsx)("th",{style:{fontSize:"14px"},children:"Total\xa0Room"}),(0,x.jsx)("th",{style:{fontSize:"14px"},children:"Total\xa0Pax"})]})}),(0,x.jsx)("tbody",{children:(null===m||void 0===m?void 0:m.length)>0&&Object.values(m.reduce(((e,t)=>(e[t.bookingId]||(e[t.bookingId]=[]),e[t.bookingId].push(t),e)),{})).reverse().map(((s,l)=>(0,x.jsxs)(n.Fragment,{children:[(0,x.jsxs)("tr",{children:[(0,x.jsxs)("td",{className:"expandable name",style:{color:"blue",fontSize:"14px"},onClick:()=>{return e=s[0].bookingId,void t((t=>({...t,[e]:!t[e]})));var e},children:[(0,x.jsx)("img",{src:r,alt:"Icon"}),"\xa0",s[0].bookingId]}),(0,x.jsx)("td",{style:{fontSize:"14px"},className:"text-center",children:s[0].agentEmail}),(0,x.jsx)("td",{style:{fontSize:"14px"},className:"text-center",children:(0,x.jsx)("b",{children:"undefined"!==s[0].paymentStatus?s[0].paymentStatus:""})}),(0,x.jsx)("td",{style:{fontSize:"14px"},className:"text-center",children:(0,x.jsx)("span",{className:"badge ms-auto ".concat("SUCCESS"===s[0].bookingStatus?"bg-success":"HOLD"===s[0].bookingStatus?"bg-warning":"cancelled"===s[0].bookingStatus?"bg-danger":"bg-orange"),children:s[0].bookingStatus})}),(0,x.jsx)("td",{style:{fontSize:"14px"},className:"text-center",children:new Date(s[0].checkIN).toISOString().slice(0,10)}),(0,x.jsx)("td",{style:{fontSize:"14px"},className:"text-center",children:new Date(s[0].checkOut).toISOString().slice(0,10)}),(0,x.jsx)("td",{style:{fontSize:"14px"},className:"text-center",children:s[0].totalAmount}),(0,x.jsx)("td",{style:{fontSize:"14px"},className:"text-center",children:s[0].totalRooms}),(0,x.jsx)("td",{style:{fontSize:"14px"},className:"text-center",children:s[0].totalPax})]}),e[s[0].bookingId]&&s.map(((e,t)=>(0,x.jsx)("tr",{children:(0,x.jsxs)("td",{colSpan:"9",className:"gray-row",children:[(0,x.jsx)("b",{children:"Name :"})," ",e.salutation," ",e.firstName," ",e.lastName,"\xa0\xa0\xa0\xa0\xa0",(0,x.jsx)("b",{children:"Paxtype:"})," ","1"===e.paxType||"ADULT"===e.paxType?"Adult":"2"===e.paxType||"CHILD"===e.paxType?"Child":"3"===e.paxType||"INFANT"===e.paxType?"Infant":"","\xa0\xa0\xa0\xa0\xa0","ROUND_TRIP_CUSTOM"===e.TripType&&"undefined"!==e.Trip&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("b",{children:"Trip :"})," ",e.Trip,"\xa0\xa0\xa0\xa0\xa0"]})]})},"expandedRow-".concat(e.bookingId[0],"-").concat(t))))]},l)))})]})})]})})})})}}}]);
//# sourceMappingURL=8551.e5a64760.chunk.js.map