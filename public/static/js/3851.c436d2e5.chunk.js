"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[3851],{71617:(e,s,t)=>{t.r(s),t.d(s,{default:()=>y});var a=t(78983),n=t(16157),l=t(72791),r=(t(97477),t(61134)),c=t(81364),i=t(55294),o=(t(93076),t(24846),t(40835),t(81694)),d=t.n(o),h=t(10162),m=t(80184);const u=l.forwardRef(((e,s)=>{let{bsPrefix:t,fluid:a=!1,as:n="div",className:l,...r}=e;const c=(0,h.vE)(t,"container"),i="string"===typeof a?"-".concat(a):"-fluid";return(0,m.jsx)(n,{ref:s,...r,className:d()(l,a?"".concat(c).concat(i):c)})}));u.displayName="Container";const x=u,j=l.forwardRef(((e,s)=>{let{bsPrefix:t,className:a,as:n="div",...l}=e;const r=(0,h.vE)(t,"row"),c=(0,h.pi)(),i=(0,h.zG)(),o="".concat(r,"-cols"),u=[];return c.forEach((e=>{const s=l[e];let t;delete l[e],null!=s&&"object"===typeof s?({cols:t}=s):t=s;const a=e!==i?"-".concat(e):"";null!=t&&u.push("".concat(o).concat(a,"-").concat(t))})),(0,m.jsx)(n,{ref:s,...l,className:d()(a,r,...u)})}));j.displayName="Row";const p=j;var A=t(51910),g=t(62591);const v=()=>{let{register:e,handleSubmit:s,reset:t,formState:{errors:o}}=(0,r.cI)();const[d,h]=(0,l.useState)(!1),[u,j]=(0,l.useState)([]),[v,b]=(0,l.useState)(""),[f,y]=(0,l.useState)(""),[N,S]=(0,l.useState)(""),[k,w]=(0,l.useState)(""),[C,P]=(0,l.useState)("");let[T,M]=(0,l.useState)(!0);const R=()=>h(!1),[_,B]=(0,l.useState)([]);return(0,l.useEffect)((()=>{!function(){let e=(0,c.Do)(c.vA);i.Z.get(c.ys+"admin/view_markup_details",{headers:{Authorization:"Bearer ".concat(e),Content_Type:"application-json"}}).then((e=>{console.log(e.data),B(e.data.recordset),M(!1)})).catch((e=>{console.log(e),M(!1)}))}()}),[]),(0,m.jsx)(m.Fragment,{children:T?(0,m.jsx)("div",{children:(0,m.jsx)("span",{className:"spinner-border text-primary"})}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(a.rb,{children:(null===_||void 0===_?void 0:_.length)>0&&Object.values(_.reduce(((e,s)=>(e[s.name]||(e[s.name]=[]),e[s.name].push(s),e)),{})).map(((e,s)=>(0,m.jsx)(a.b7,{sm:6,lg:3,children:(0,m.jsx)(a.co,{style:{height:"87px"},className:"mb-4",color:s%6===0?"primary":s%6===1?"danger":s%6===2?"warning":s%6===3?"success":s%6===4?"secondary":"info",value:(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("span",{style:{fontSize:"smaller"},children:e[0].name})}),title:"Status: ".concat(e[0].markup_status),action:(0,m.jsx)(n.Z,{className:"btn btn-sm",onClick:()=>((e,s,t,a,n,l)=>{let r=_.filter((s=>s.name===e));console.log(r),b(e),j(r),y(s),S(t),w(a),P(n),h(!0)})(e[0].name,e[0].type,e[0].markup_value,e[0].cancellation_charges,e[0].rescheduling_charges,e[0].name),variant:"info",children:"Get Info"})})},s)))}),(0,m.jsxs)(A.Z,{show:d,onHide:R,centered:!0,size:"lg",children:[(0,m.jsx)(A.Z.Header,{closeButton:!0,children:(0,m.jsxs)(x,{children:[(0,m.jsx)(p,{children:(0,m.jsxs)(A.Z.Title,{children:[" ",v]})}),(0,m.jsxs)("span",{children:["( ",(0,m.jsx)("b",{children:"Type:"})," ",f]})," | ",(0,m.jsxs)("span",{children:[(0,m.jsx)("b",{children:"Value:"})," ",N]})," | ",(0,m.jsxs)("span",{children:[(0,m.jsx)("b",{children:"Cancle Charge: "})," ",k]})," | ",(0,m.jsxs)("span",{children:[(0,m.jsx)("b",{children:"Rescheduling Charge:"})," ",C," )"]})]})}),(0,m.jsx)(A.Z.Body,{children:(0,m.jsxs)("form",{children:[(0,m.jsxs)("div",{className:"row",children:[(0,m.jsx)("br",{}),(0,m.jsx)("div",{style:{height:"180px"},className:"table-responsive",children:(0,m.jsxs)(g.Z,{responsive:!0,hover:!0,children:[(0,m.jsx)("thead",{style:{position:"sticky",top:0},children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{children:"ID"}),(0,m.jsx)("th",{children:"Agent"}),(0,m.jsx)("th",{children:"Name"}),(0,m.jsx)("th",{children:"Contact"}),(0,m.jsx)("th",{children:"Supplier"})]})}),(0,m.jsx)("tbody",{children:u.map(((e,s)=>(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{children:s+1}),(0,m.jsx)("td",{children:e.agentEmail}),(0,m.jsxs)("td",{children:[e.FirstName," ",e.LastName]}),(0,m.jsx)("td",{children:e.PhoneNumber}),(0,m.jsx)("td",{style:{textAlign:"center"},children:e.supplier})]},s)))})]})})]}),(0,m.jsx)("hr",{}),(0,m.jsx)("div",{className:"mb d-flex justify-content-between align-items-center",children:(0,m.jsx)(n.Z,{variant:"secondary",onClick:R,children:"Close"})})]})})]})]})})},b=t.p+"static/media/Tick3.132b2808f2cb2b0de9dd.gif";var f=t(63334);const y=()=>{let{register:e,handleSubmit:s,reset:t,formState:{errors:o}}=(0,r.cI)();const[d,h]=(0,l.useState)([]),[u,x]=(0,l.useState)([]),[j,p]=(0,l.useState)([]),[A,g]=(0,l.useState)(!1),[y,N]=(0,l.useState)(!1),[S,k]=(0,l.useState)(!1);function w(){let e=(0,c.Do)(c.vA);i.Z.get(c.ys+"admin/fetchMarkupAgents",{headers:{Authorization:"Bearer ".concat(e),Content_Type:"application-json"}}).then((e=>{console.log(e.data.recordset),h(e.data.recordset.markUps),x(e.data.recordset.aspNetUsers.map((e=>({value:e.UserName,label:e.UserName}))))})).catch((e=>{console.log(e)}))}return(0,l.useEffect)((()=>{w()}),[]),(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(a.xH,{className:"mb-4",children:(0,m.jsxs)(a.sl,{children:[(0,m.jsxs)(a.bn,{children:[(0,m.jsx)("div",{style:{textAlign:"center"},children:(0,m.jsx)("h2",{children:(0,m.jsx)("b",{children:" Allot New Markup "})})}),(0,m.jsx)("br",{}),(0,m.jsx)("form",{onSubmit:s((function(e){let s=j.map((e=>e.value));if(e={MarkupPlans:e.MarkupPlans,agents:s},console.log(e),""===e.MarkupPlans)(0,c.Jc)("Choose Markup Plan");else if(0===e.agents.length)(0,c.Jc)("Choose Agents");else{let s=(0,c.Do)(c.vA);i.Z.post(c.ys+"admin/travelAgentsFlightMarkups",e,{headers:{Authorization:"Bearer ".concat(s),Content_Type:"application-json"}}).then((e=>{!1===e.data.error?(console.log(e.data),t(),w(),p([]),N((e=>!e)),(0,c.Qm)(e.data.message)):(0,c.Jc)(e.data.message)})).catch((e=>{console.log(e)}))}})),children:(0,m.jsxs)("div",{className:"row",children:[(0,m.jsxs)("div",{className:"col-sm-4",children:[(0,m.jsx)("span",{children:"Markup Plans"}),(0,m.jsxs)("select",{...e("MarkupPlans"),className:"form-control",children:[(0,m.jsx)("option",{value:"",children:"All"}),d.map((e=>(0,m.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,m.jsxs)("div",{className:"col-sm-4",children:[(0,m.jsx)("span",{children:"Travel Agents"}),(0,m.jsx)(f.ZP,{value:j,onChange:p,options:[{value:"All",label:"All"},...u],isMulti:!0,menuPortalTarget:document.body,styles:{menuPortal:e=>({...e,zIndex:9999}),menu:e=>({...e,maxHeight:200,overflowY:"auto"})}},S?"reload":"no_reload")]}),(0,m.jsxs)("div",{className:"col-sm-4",children:[(0,m.jsx)("span",{style:{visibility:"hidden"},children:"Booking Status"}),(0,m.jsx)("br",{}),(0,m.jsx)(n.Z,{variant:"primary",className:"w-100",type:"submit",children:"Add"})]})]})})]}),(0,m.jsxs)("div",{style:{textAlign:"center",marginTop:"40px",marginBottom:"15px"},children:[(0,m.jsxs)("h2",{children:[(0,m.jsx)("img",{src:b,alt:"Delete Icon"}),(0,m.jsx)("b",{children:" Already Alloted Markups "})]}),(0,m.jsx)("span",{children:"(Get Details of those agents who have enrolled in these Plans)"})]}),(0,m.jsx)(v,{},y?"reload":"no_reload")]})})})}},97477:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAACxMAAAsTAQCanBgAAAHhSURBVDhPfVI9T1RBFD3n7mPRDbKGDwsLPgwNiIlWJFjSWWBCqYlWJJpoYWyMDb9BXcIPgER7EhITQwENNhYYKwkmxE8SxV1WRXZ3rvfOe4RdJJyXN/PumbnvnjNziSb0z+0MsCGTkNwkVK8AoaiQH4S+RiMshHyysnWn40u2HVmycrBUvqGUR0YMg8yl/CFUdd+mdVGd2bxXXHIuJg+Wft4Ec08t6vL4JNhPNhg49eH+mbeMUkNukeRoth7RmSeGe4g3XwNqISMzqIYXBd2bFvcYpR5BXyfweCxBoS0jWsCp3zg9Iebv+nEeTQkSiV8xboat5W24bcu8nHFR6qhJvdQrGDpLnEqAke40vmh8e1MJ836VA7PlOimRHjsvUapX9MRzBeLTrqKhwJ4ND5br2KpYYAga6uyf3d0WoteJNktKPTJWnBlPMP2yhopdktpTtTmkuV75s5i1tTREPNXyX39tYw2xoid6XDH+INFhvl8JAhayBmhBUI1S/TkK46oUeSYh4arF6yl9iI2d1KNL/Q/k/P6v7+/iPVwola8F8olJGYqLJ0F1jaK3Nu8W38eb9F71ljM5z4+z4DC+qsTcQaJzLR0wUvrW4Z3jDeD3CGoXwW0/HPfoUj8+7PuT7gb+AeKuyMIcTVT/AAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=3851.c436d2e5.chunk.js.map