"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[2094],{22094:(e,s,a)=>{a.r(s),a.d(s,{default:()=>d});var r=a(72791),t=a(78983),n=a(81364),l=a(55294),m=a(61134),c=a(75970),i=a(80184);const d=()=>{const[e,s]=(0,r.useState)(null),[a,d]=(0,r.useState)(null),[o,h]=(0,r.useState)(null),[x,u]=(0,r.useState)(null);(0,r.useEffect)((()=>{(async function(){try{let e=(0,n.Do)(n.vA),a=n.ys+"admin/user-roles",r=await l.Z.get(a,{headers:{Authorization:"Bearer ".concat(e)}});200!==r.status||r.data.error||s(r.data.recordset)}catch(e){(0,n.Jc)(e.message)}})().then(),async function(){try{let e=(0,n.Do)(n.vA),s=n.ys+"admin/managers",a=await l.Z.get(s,{headers:{Authorization:"Bearer ".concat(e)}});200!==a.status||a.data.error||d(a.data.recordset)}catch(e){(0,n.Jc)(e.message)}}().then(),async function(){try{let e=(0,n.Do)(n.vA),s=n.ys+"admin/departments",a=await l.Z.get(s,{headers:{Authorization:"Bearer ".concat(e)}});200!==a.status||a.data.error||h(a.data.recordset)}catch(e){(0,n.Jc)(e.message)}}().then(),async function(){try{let e=(0,n.Do)(n.vA),s=n.ys+"admin/branches",a=await l.Z.get(s,{headers:{Authorization:"Bearer ".concat(e)}});200!==a.status||a.data.error||u(a.data.recordset)}catch(e){(0,n.Jc)(e.message)}}().then()}),[]);const{register:j,handleSubmit:N,formState:{errors:p},reset:g,watch:b}=(0,m.cI)(),f=b("password");return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(t.xH,{children:[(0,i.jsx)(t.bn,{className:"card-header-bg",children:(0,i.jsx)("h4",{className:"mb-0 primary-color",children:"Create a new account"})}),(0,i.jsx)(t.sl,{children:(0,i.jsx)("form",{onSubmit:N((async function(e){try{let s=(0,n.Do)(n.vA),a=n.ys+"admin/users",r=await l.Z.post(a,e,{headers:{Authorization:"Bearer ".concat(s)}});200===r.status&&r.data.error?(0,n.Jc)(r.data.message):200!==r.status||r.data.error||(g(),(0,n.Qm)(r.data.message))}catch(s){(0,n.Jc)(s.message)}})),children:(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col-12",children:(0,i.jsxs)("label",{className:"fw-bold",children:["Select User Role ",(0,i.jsx)("span",{className:"text-danger",children:"*"})]})}),e&&e.map((e=>(0,i.jsxs)("div",{className:"col-md-3",children:[(0,i.jsx)("input",{type:"checkbox",value:e.Id,id:e.Id,name:"roles",...j("roles",{required:"Please Select User Role."})}),(0,i.jsx)("label",{htmlFor:e.Id,className:"ms-2",children:e.Name})]},e.Id))),(0,i.jsx)("div",{className:"col-12",children:(0,i.jsx)(c.B,{errors:p,name:"roles",render:e=>{let{message:s}=e;return(0,i.jsx)("p",{className:"text-danger",children:s})}})}),(0,i.jsx)("div",{className:"col-12 mt-4 mb-2",children:(0,i.jsx)("h5",{className:"text-muted",children:"Member Information"})}),(0,i.jsxs)("div",{className:"col-md-3 mb-3",children:[(0,i.jsxs)("label",{htmlFor:"firstName",children:["First Name ",(0,i.jsx)("span",{className:"text-danger",children:"*"})]}),(0,i.jsx)("input",{type:"text",className:"form-control",id:"firstName",name:"firstName",...j("firstName",{required:"This is required."})}),(0,i.jsx)(c.B,{errors:p,name:"firstName",render:e=>{let{message:s}=e;return(0,i.jsx)("p",{className:"text-danger",children:s})}})]}),(0,i.jsxs)("div",{className:"col-md-3 mb-3",children:[(0,i.jsxs)("label",{htmlFor:"lastName",children:["Last Name ",(0,i.jsx)("span",{className:"text-danger",children:"*"})]}),(0,i.jsx)("input",{type:"text",className:"form-control",id:"lastName",name:"lastName",...j("lastName",{required:"This is required."})}),(0,i.jsx)(c.B,{errors:p,name:"lastName",render:e=>{let{message:s}=e;return(0,i.jsx)("p",{className:"text-danger",children:s})}})]}),(0,i.jsxs)("div",{className:"col-md-3 mb-3",children:[(0,i.jsxs)("label",{htmlFor:"email",children:["Email ",(0,i.jsx)("span",{className:"text-danger",children:"*"})]}),(0,i.jsx)("input",{type:"email",className:"form-control",id:"email",name:"email",...j("email",{required:"This is required."})}),(0,i.jsx)(c.B,{errors:p,name:"email",render:e=>{let{message:s}=e;return(0,i.jsx)("p",{className:"text-danger",children:s})}})]}),(0,i.jsxs)("div",{className:"col-md-3 mb-3",children:[(0,i.jsxs)("label",{htmlFor:"mobile",children:["Phone Number ",(0,i.jsx)("span",{className:"text-danger",children:"*"})]}),(0,i.jsx)("input",{type:"tel",className:"form-control",id:"mobile",name:"mobile",...j("mobile",{required:"This is required.",pattern:{value:/^[0-9]{10}$/,message:"Invalid mobile number. Must be 10 digits."},maxLength:{value:10,message:"Mobile number cannot exceed 10 digits."}})}),(0,i.jsx)(c.B,{errors:p,name:"mobile",render:e=>{let{message:s}=e;return(0,i.jsx)("p",{className:"text-danger",children:s})}})]}),(0,i.jsx)("div",{className:"col-12 mt-3 mb-2",children:(0,i.jsx)("h5",{className:"text-muted",children:"Login Information"})}),(0,i.jsxs)("div",{className:"col-md-3 mb-3",children:[(0,i.jsxs)("label",{htmlFor:"userName",children:["User Name ",(0,i.jsx)("span",{className:"text-danger",children:"*"})]}),(0,i.jsx)("input",{type:"text",className:"form-control",id:"userName",name:"userName",...j("userName",{required:"This is required."})}),(0,i.jsx)(c.B,{errors:p,name:"userName",render:e=>{let{message:s}=e;return(0,i.jsx)("p",{className:"text-danger",children:s})}})]}),(0,i.jsxs)("div",{className:"col-md-3 mb-3",children:[(0,i.jsxs)("label",{htmlFor:"password",children:["Password ",(0,i.jsx)("span",{className:"text-danger",children:"*"})]}),(0,i.jsx)("input",{type:"password",className:"form-control",id:"password",name:"password",...j("password",{required:"This is required.",minLength:{value:6,message:"Password must be at least 6 characters long."}})}),(0,i.jsx)(c.B,{errors:p,name:"password",render:e=>{let{message:s}=e;return(0,i.jsx)("p",{className:"text-danger",children:s})}})]}),(0,i.jsxs)("div",{className:"col-md-3 mb-3",children:[(0,i.jsxs)("label",{htmlFor:"confirmPassword",children:["Confirm Password ",(0,i.jsx)("span",{className:"text-danger",children:"*"})]}),(0,i.jsx)("input",{type:"password",className:"form-control",id:"confirmPassword",name:"confirmPassword",...j("confirmPassword",{required:"This is required.",validate:e=>e===f||"Passwords do not match"})}),(0,i.jsx)(c.B,{errors:p,name:"confirmPassword",render:e=>{let{message:s}=e;return(0,i.jsx)("p",{className:"text-danger",children:s})}})]}),(0,i.jsxs)("div",{className:"col-md-3 mb-3",children:[(0,i.jsx)("label",{htmlFor:"manager",children:"Manager Name"}),(0,i.jsxs)("select",{name:"manager",id:"manager",className:"form-control",...j("manager"),children:[(0,i.jsx)("option",{value:"",children:"Select Manager Name"}),a&&a.map((e=>(0,i.jsxs)("option",{value:e.Id,children:[e.FirstName," ",e.LastName]},e.Id)))]})]}),(0,i.jsxs)("div",{className:"col-md-3 mb-3",children:[(0,i.jsx)("label",{htmlFor:"department",children:"Department Name"}),(0,i.jsxs)("select",{name:"department",id:"department",className:"form-control",...j("department"),children:[(0,i.jsx)("option",{value:"",children:"Select Department Name"}),o&&o.map((e=>(0,i.jsx)("option",{value:e.DepartmentID,children:e.DepartmentName},e.DepartmentID)))]})]}),(0,i.jsxs)("div",{className:"col-md-3 mb-3",children:[(0,i.jsx)("label",{htmlFor:"branch",children:"Branch Name"}),(0,i.jsxs)("select",{name:"branch",id:"branch",className:"form-control",...j("branch"),children:[(0,i.jsx)("option",{value:"",children:"Select Branch Name"}),x&&x.map((e=>(0,i.jsx)("option",{value:e.BranchID,children:e.BranchName},e.BranchID)))]})]}),(0,i.jsx)("div",{className:"col-12",children:(0,i.jsx)("button",{className:"btn btn-primary px-5",children:"Submit"})})]})})})]})})}},75970:(e,s,a)=>{a.d(s,{B:()=>n});var r=a(72791),t=a(61134),n=function(e){var s=e.as,a=e.errors,n=e.name,l=e.message,m=e.render,c=function(e,s){if(null==e)return{};var a,r,t={},n=Object.keys(e);for(r=0;r<n.length;r++)s.indexOf(a=n[r])>=0||(t[a]=e[a]);return t}(e,["as","errors","name","message","render"]),i=(0,t.Gc)(),d=(0,t.U2)(a||i.formState.errors,n);if(!d)return null;var o=d.message,h=d.types,x=Object.assign({},c,{children:o||l});return r.isValidElement(s)?r.cloneElement(s,x):m?m({message:o||l,messages:h}):r.createElement(s||r.Fragment,x)}}}]);
//# sourceMappingURL=2094.8cc8c2fd.chunk.js.map