"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[50],{50050:(e,t,s)=>{s.r(t),s.d(t,{default:()=>j});var a=s(72791),n=s(73787),r=s(78983),i=s(16157),l=s(51910),d=s(61134),c=s(81364),o=s(55294),h=s(62591),m=s(40835),x=s(80184);n.Z.CanvasJSChart;const j=()=>{let[e,t]=(0,a.useState)(!0);(0,a.useEffect)((()=>{v(),f()}),[]);const[s,n]=(0,a.useState)([]),[j,p]=(0,a.useState)([]),u=new Date,b=String(u.getMonth()+1).padStart(2,"0"),y=u.getFullYear()+"-"+b+"-"+String(u.getDate()).padStart(2,"0");function g(e){var t=(e=e.toString()).substring(e.length-3),s=e.substring(0,e.length-3);return""!=s&&(t=","+t),s.replace(/\B(?=(\d{2})+(?!\d))/g,",")+t}function v(){let e=(0,c.Do)(c.vA);o.Z.get(c.ys+"admin/view-symbo-account",{headers:{Authorization:"Bearer ".concat(e),Content_Type:"application-json"}}).then((e=>{n(e.data.recordset)})).catch((e=>{console.log(e)}))}function f(){let e=(0,c.Do)(c.vA);o.Z.get(c.ys+"admin/symbo-balance",{headers:{Authorization:"Bearer ".concat(e),Content_Type:"application-json"}}).then((e=>{p(e.data.recordset[0].final_amount),t(!1)})).catch((e=>{console.log(e),t(!1)}))}let{register:N,handleSubmit:T,reset:C,formState:{errors:_}}=(0,d.cI)();const[k,S]=(0,a.useState)(!1),w=()=>S(!1);const[D,A]=(0,a.useState)(1),P=Math.ceil(s.length/10),Z=[];let B=D-Math.floor(2.5);B=Math.max(1,B);let M=B+5-1;M=Math.min(P,M),M-B+1<5&&(B=Math.max(1,M-5+1));for(let a=B;a<=M;a++)Z.push(a);return(0,x.jsx)(x.Fragment,{children:e?(0,x.jsx)("div",{children:(0,x.jsx)("span",{className:"spinner-border text-primary"})}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(r.xH,{className:"mb-4",children:(0,x.jsx)(r.sl,{children:(0,x.jsx)(r.rb,{children:(0,x.jsxs)("div",{className:"table-responsive px-3 ",children:[(0,x.jsxs)("h2",{style:{textAlign:"center"},children:[" ",(0,x.jsxs)("b",{children:["Total Balance : ","\u20b9 ",(0,x.jsx)(m.ZP,{start:0,end:j,useIndianSeparators:!0})," "]})," "]}),(0,x.jsx)("hr",{}),(0,x.jsxs)("div",{className:"bg-light py-2 mb-3",children:[(0,x.jsx)(i.Z,{variant:"primary",onClick:()=>{S(!0)},children:"Add New Payment"}),(0,x.jsx)("div",{className:"row"})]}),(0,x.jsxs)("div",{className:"row",children:[(0,x.jsx)("br",{}),(0,x.jsx)("div",{style:{height:"335px"},className:"table-responsive",children:(0,x.jsxs)(h.Z,{responsive:!0,hover:!0,children:[(0,x.jsx)("thead",{style:{position:"sticky",top:0},children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{children:"Transaction ID"}),(0,x.jsx)("th",{children:"Created On"}),(0,x.jsx)("th",{children:"Mode Of Payment"}),(0,x.jsx)("th",{children:"Date of Payment"}),(0,x.jsx)("th",{children:"Amount"}),(0,x.jsx)("th",{children:"Type"})]})}),(0,x.jsx)("tbody",{children:s.slice(10*(D-1),10*D).map(((e,t)=>(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:e.id}),(0,x.jsx)("td",{children:e.date.split("T")[0]}),(0,x.jsx)("td",{children:e.modeOfPayment}),(0,x.jsx)("td",{children:e.dateOfPayment.split("T")[0]}),"Deposit"===e.transactionType?(0,x.jsx)("td",{style:{color:"green"},children:g(e.amount)}):(0,x.jsx)("td",{style:{color:"red"},children:g(e.amount)}),"Deposit"===e.transactionType?(0,x.jsx)("td",{children:(0,x.jsxs)("span",{className:"badge bg-success ms-auto",children:[" ",e.transactionType," "]})}):(0,x.jsx)("td",{children:(0,x.jsxs)("span",{className:"badge bg-danger ms-auto",children:[" ",e.transactionType," "]})})]},t)))})]})}),(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)("button",{className:"btn btn-sm me-2",style:{fontSize:"18px",border:"none"},onClick:()=>{A((e=>Math.max(e-1,1)))},disabled:1===D,children:"\xab"}),Z.map((e=>(0,x.jsx)("button",{className:"btn btn-sm ".concat(D===e?"btn-success":"btn-light"),onClick:()=>(e=>{A(e)})(e),children:e},e))),(0,x.jsx)("button",{className:"btn btn-sm ms-2",style:{fontSize:"18px",border:"none"},onClick:()=>{A((e=>Math.min(e+1,P)))},disabled:D===P,children:"\xbb"})]})]})]})})})}),(0,x.jsxs)(l.Z,{show:k,onHide:w,centered:!0,children:[(0,x.jsx)(l.Z.Header,{closeButton:!0,children:(0,x.jsx)(l.Z.Title,{children:"Add Payment"})}),(0,x.jsx)(l.Z.Body,{children:(0,x.jsxs)("form",{onSubmit:T((function(e){var t=document.getElementById("amount").value,s=document.getElementById("type").value;if(j<t&&"Withdraw"===s)(0,c.Jc)("Your withdraw value exceeds the available balance");else{let t=(0,c.Do)(c.vA);o.Z.post(c.ys+"admin/symbo-account",e,{headers:{Authorization:"Bearer ".concat(t),Content_Type:"application-json"}}).then((e=>{!1===e.data.error?((0,c.Qm)(e.data.message),v(),f(),C(),w()):(0,c.Jc)("Error while Adding")})).catch((e=>{console.log(e)}))}})),children:[(0,x.jsxs)("div",{className:"mb-3",children:[(0,x.jsx)("label",{htmlFor:"mop",children:"Mode of Payment"}),(0,x.jsxs)("select",{...N("mop",{required:!0}),className:"form-control",id:"mop",children:[(0,x.jsx)("option",{value:"",children:" Choose Mode of Payment"}),(0,x.jsx)("option",{value:"Credit_Card",children:" Credit Card"}),(0,x.jsx)("option",{value:"Debit_Card",children:"Debit Card"}),(0,x.jsx)("option",{value:"Net_Banking",children:"Net Banking"}),(0,x.jsx)("option",{value:"UPI",children:"UPI"})]}),_.mop&&(0,x.jsx)("p",{className:"text-danger",children:"This is a required field."})]}),(0,x.jsxs)("div",{className:"mb-3",children:[(0,x.jsx)("label",{htmlFor:"amount",children:"Amount"}),(0,x.jsx)("input",{...N("amount",{required:!0}),pattern:"[0-9]{1,9}",placeholder:"Enter Amount",type:"text",id:"amount",className:"form-control"}),_.amount&&(0,x.jsx)("p",{className:"text-danger",children:"This is a required field."})]}),(0,x.jsxs)("div",{className:"mb-3",children:[(0,x.jsx)("label",{htmlFor:"date",children:"Date of Payment"}),(0,x.jsx)("input",{...N("date",{required:!0}),placeholder:"Date of Payment",type:"date",id:"date",max:y,min:"1980-01-01",className:"form-control"}),_.date&&(0,x.jsx)("p",{className:"text-danger",children:"This is a required field."})]}),(0,x.jsxs)("div",{className:"mb-3",children:[(0,x.jsx)("label",{htmlFor:"type",children:"Transaction Type"}),(0,x.jsxs)("select",{...N("type",{required:!0}),className:"form-control",id:"type",children:[(0,x.jsx)("option",{value:"",children:" Transaction Type"}),(0,x.jsx)("option",{value:"Deposit",children:"Deposit"}),(0,x.jsx)("option",{value:"Withdraw",children:"Withdraw"})]}),_.type&&(0,x.jsx)("p",{className:"text-danger",children:"This is a required field."})]}),(0,x.jsxs)("div",{className:"mb-3",children:[(0,x.jsx)("label",{htmlFor:"Remarks",children:"Remarks"}),(0,x.jsx)("textarea",{...N("Remarks",{required:!0}),placeholder:"Remarks",id:"Remarks",className:"form-control"}),_.Remarks&&(0,x.jsx)("p",{className:"text-danger",children:"This is a required field."})]}),(0,x.jsx)("hr",{}),(0,x.jsxs)("div",{className:"mb d-flex justify-content-between align-items-center",children:[(0,x.jsx)(i.Z,{variant:"secondary",onClick:w,children:"Close"}),(0,x.jsx)(i.Z,{variant:"primary",type:"submit",className:"ml-auto",children:"Add"})]})]})})]})]})})}}}]);
//# sourceMappingURL=50.41eae83b.chunk.js.map